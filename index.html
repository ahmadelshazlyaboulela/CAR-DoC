<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CAR_Doc | مشخصاتي السيارات الذكي</title>
    <!-- تضمين المكتبات اللازمة للتشغيل المباشر -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;700;900&display=swap" rel="stylesheet">
    
    <style>
        body { 
            font-family: 'Tajawal', sans-serif; 
            background-color: #05070a; 
            color: #f1f5f9; 
            margin: 0;
            overflow-x: hidden;
        }

        /* دوران جنط المايباخ الذهبي من اليسار لليمين (Clockwise) */
        @keyframes maybach-spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        .animate-maybach-spin { animation: maybach-spin 8s linear infinite; }

        /* تأثير الدخان خلف الشعار */
        .smoke-particle { position: absolute; background: rgba(255, 255, 255, 0.08); border-radius: 50%; filter: blur(18px); opacity: 0; }
        @keyframes smoke-float { 
            0% { transform: translate(0, 0) scale(0.5); opacity: 0; } 
            50% { opacity: 0.2; } 
            100% { transform: translate(-60px, -30px) scale(2.5); opacity: 0; } 
        }
        .p1 { width: 60px; height: 60px; animation: smoke-float 4s infinite; }
        .p2 { width: 40px; height: 40px; animation: smoke-float 5s infinite 1s; }
        .p3 { width: 80px; height: 80px; animation: smoke-float 6s infinite 0.5s; }

        /* أنيميشن مشهد التحميل (شيروكي 2026 في المدينة) */
        @keyframes city-move {
            0% { transform: translateX(0); }
            100% { transform: translateX(-100%); }
        }
        .city-animation { animation: city-move 20s linear infinite; }
        
        @keyframes road-move {
            0% { transform: translateX(0); }
            100% { transform: translateX(-50%); }
        }
        .road-lines { animation: road-move 0.8s linear infinite; }
        
        @keyframes jeep-vibrate {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            25% { transform: translateY(-1px) rotate(0.2deg); }
            75% { transform: translateY(1px) rotate(-0.2deg); }
        }
        .jeep-bounce { animation: jeep-vibrate 0.15s infinite; }

        @keyframes wheel-rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        .wheel-spin { transform-origin: center; animation: wheel-rotate 0.4s linear infinite; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- أيقونات ميكانيكية احترافية (SVG) ---
        const IconZap = () => <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2.5" strokeLinecap="round" strokeLinejoin="round"><path d="M13 2 L3 14 12 14 11 22 21 10 12 10 13 2 Z"/></svg>;
        const IconCpu = () => <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect x="4" y="4" width="16" height="16" rx="2"/><path d="M9 9h6v6H9z"/><path d="M15 2v2M15 20v2M2 15h2M2 9h2M20 15h2M20 9h2M9 2v2M9 20v2"/></svg>;
        const IconWrench = () => <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"/></svg>;
        const IconMic = () => <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3z"/><path d="M19 10v2a7 7 0 0 1-14 0v-2"/><line x1="12" y1="19" x2="12" y2="22"/><line x1="8" y1="22" x2="16" y2="22"/></svg>;
        const IconCamera = () => <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"/><circle cx="12" cy="13" r="4"/></svg>;

        const Logo = () => (
            <div className="relative flex items-center gap-0 group cursor-default" dir="ltr">
                <div className="absolute -left-10 top-0 w-full h-full pointer-events-none opacity-40">
                    <div className="smoke-particle p1"></div>
                    <div className="smoke-particle p2"></div>
                    <div className="smoke-particle p3"></div>
                </div>
                <div className="relative z-10 flex items-center text-4xl font-black italic tracking-tighter select-none">
                    <span className="text-white drop-shadow-[0_2px_4px_rgba(0,0,0,0.8)]">CAR_D</span>
                    <div className="relative w-11 h-11 mx-1 flex items-center justify-center">
                        <div className="absolute inset-0 bg-amber-500/10 rounded-full blur-lg animate-pulse"></div>
                        <svg viewBox="0 0 100 100" className="w-full h-full drop-shadow-2xl overflow-visible animate-maybach-spin">
                            <defs>
                                <linearGradient id="rimGold" x1="0%" y1="0%" x2="100%" y2="100%">
                                    <stop offset="0%" style={{stopColor:'#FFD700'}} />
                                    <stop offset="50%" style={{stopColor:'#B8860B'}} />
                                    <stop offset="100%" style={{stopColor:'#8B6508'}} />
                                </linearGradient>
                            </defs>
                            <circle cx="50" cy="50" r="46" fill="#0a0a0a" stroke="#1a1a1a" strokeWidth="4" />
                            <circle cx="50" cy="50" r="38" fill="#111" stroke="url(#rimGold)" strokeWidth="1.5" />
                            {[...Array(12)].map((_, i) => (
                                <line key={i} x1="50" y1="50" x2={50 + 34 * Math.cos((i * 30 * Math.PI) / 180)} y2={50 + 34 * Math.sin((i * 30 * Math.PI) / 180)} stroke="url(#rimGold)" strokeWidth="1.5" />
                            ))}
                            <circle cx="50" cy="50" r="12" fill="#111" stroke="url(#rimGold)" strokeWidth="1" />
                            <path d="M50 42 L52 49 L59 49 L53 53 L55 60 L50 56 L45 60 L47 53 L41 49 L48 49 Z" fill="url(#rimGold)" />
                        </svg>
                    </div>
                    <span className="text-white drop-shadow-[0_2px_4px_rgba(0,0,0,0.8)]">c</span>
                </div>
            </div>
        );

        const CherokeeLoading = () => (
            <div className="flex flex-col items-center gap-12 w-full max-w-2xl">
                <div className="relative w-full h-56 overflow-hidden rounded-[40px] bg-[#020617] border border-white/5 flex items-end justify-center">
                    <div className="absolute inset-0 opacity-20 pointer-events-none city-animation flex w-[200%]">
                        <svg className="h-full w-1/2" viewBox="0 0 1000 200" preserveAspectRatio="none">
                            <path d="M0,200 L0,150 L30,150 L30,100 L70,100 L150,80 L300,60 L500,100 L700,80 L1000,120 L1000,200 Z" fill="#334155" />
                        </svg>
                        <svg className="h-full w-1/2" viewBox="0 0 1000 200" preserveAspectRatio="none">
                            <path d="M0,200 L0,150 L30,150 L30,100 L70,100 L150,80 L300,60 L500,100 L700,80 L1000,120 L1000,200 Z" fill="#334155" />
                        </svg>
                    </div>
                    <div className="absolute bottom-0 w-full h-10 bg-[#0f172a] flex items-center overflow-hidden">
                        <div className="road-lines flex w-[200%]">
                            {[...Array(20)].map((_, i) => <div key={i} className="h-1 w-12 bg-slate-700/50 mx-8 rounded-full"></div>)}
                        </div>
                    </div>
                    <div className="relative mb-8 jeep-bounce z-10">
                        <svg width="200" height="85" viewBox="0 0 200 85">
                            <path d="M20,60 L180,60 L175,40 L160,30 L110,25 L50,25 L30,35 L20,45 Z" fill="#ffffff" />
                            <path d="M55,28 L110,28 L105,35 L58,35 Z" fill="#0f172a" />
                            <rect x="25" y="45" width="15" height="5" rx="1" fill="#e2e8f0" opacity="0.8" />
                            <circle cx="50" cy="62" r="12" fill="#000" />
                            <circle cx="50" cy="62" r="7" fill="#222" className="wheel-spin" />
                            <circle cx="150" cy="62" r="12" fill="#000" />
                            <circle cx="150" cy="62" r="7" fill="#222" className="wheel-spin" />
                        </svg>
                    </div>
                </div>
                <div className="text-center">
                    <p className="text-3xl font-black text-white mb-2 tracking-tight">CAR_Doc يحلل البيانات الآن...</p>
                    <div className="flex items-center justify-center gap-2 text-cyan-500 font-bold uppercase text-xs tracking-[0.3em]">
                        <IconCpu /> <span>نظام الفحص العصبي نشط</span>
                    </div>
                </div>
            </div>
        );

        function App() {
            const [inputMode, setInputMode] = useState('text');
            const [symptom, setSymptom] = useState('');
            const [loading, setLoading] = useState(false);
            const [diagnosis, setDiagnosis] = useState(null);
            const [maintenancePlan, setMaintenancePlan] = useState(null);
            const [carModel, setCarModel] = useState('');
            const [mileage, setMileage] = useState('');
            const apiKey = ""; // يُعالج تلقائياً

            const handleAnalyze = () => {
                if(!symptom) return;
                setLoading(true);
                setTimeout(() => {
                    setDiagnosis({
                        title: "عطل في نظام حقن الوقود (البخاخات)",
                        analysis: "وصفك يشير إلى وجود انسداد جزئي في أحد البخاخات، مما يسبب ارتجاف المحرك واستهلاكاً غير طبيعي للبنزين.",
                        price: "1,500 - 2,800 ج.م",
                        tip: "حاول استخدام منظف دورة وقود أصلي مع تفويلة بنزين 95 قبل اللجوء للميكانيكي."
                    });
                    setLoading(false);
                }, 5000);
            };

            const handleMaintenance = () => {
                if(!carModel || !mileage) return;
                setLoading(true);
                setTimeout(() => {
                    setMaintenancePlan({
                        title: `خطة صيانة لـ ${carModel}`,
                        urgent: ["تغيير زيت المحرك والسيفون", "فحص تيل الفرامل الأمامي"],
                        upcoming: ["تنظيف دورة التبريد", "فحص سيور المحرك"],
                        cost: "2,000 - 4,500 ج.م"
                    });
                    setLoading(false);
                }, 4000);
            };

            return (
                <div className="min-h-screen">
                    <nav className="h-24 bg-[#05070a]/90 backdrop-blur-xl border-b border-white/5 px-8 flex items-center justify-between sticky top-0 z-50">
                        <Logo />
                        <div className="flex gap-4">
                            <button className="p-3 bg-white/5 rounded-2xl border border-white/5 hover:bg-white/10 transition-all text-slate-400">الإعدادات</button>
                        </div>
                    </nav>

                    <main className="max-w-4xl mx-auto px-6 pt-16 pb-32">
                        {!diagnosis && !maintenancePlan && !loading && (
                            <>
                                <div className="text-center mb-16 animate-in fade-in duration-1000">
                                    <h2 className="text-6xl md:text-8xl font-black text-white mb-6 tracking-tighter leading-tight">
                                        صيانة المستقبل <br/> 
                                        <span className="text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-500 italic">بين يديك الآن</span>
                                    </h2>
                                    <p className="text-slate-400 text-xl font-light italic">CAR_Doc: مشخصاتي ومساعد ذكي مدعوم بالذكاء الاصطناعي</p>
                                </div>

                                <div className="grid grid-cols-1 md:grid-cols-2 gap-6 mb-12">
                                    <div onClick={() => setInputMode('text')} className="p-10 bg-[#0e121a] rounded-[40px] border border-white/10 hover:border-cyan-500/30 transition-all cursor-pointer group">
                                        <IconCpu />
                                        <h3 className="text-2xl font-black mt-4 text-white">تشخيص الأعطال</h3>
                                        <p className="text-slate-500 mt-2">حلل عطل سيارتك بالنص أو الصور.</p>
                                    </div>
                                    <div onClick={() => setInputMode('maintenance')} className="p-10 bg-[#0e121a] rounded-[40px] border border-white/10 hover:border-blue-500/30 transition-all cursor-pointer group">
                                        <IconWrench />
                                        <h3 className="text-2xl font-black mt-4 text-white">خطة الصيانة</h3>
                                        <p className="text-slate-500 mt-2">صمم خطة صيانة وقائية لسيارتك.</p>
                                    </div>
                                </div>
                            </>
                        )}

                        {inputMode !== 'maintenance' && !diagnosis && !loading && (
                            <div className="bg-[#0e121a] rounded-[50px] border border-white/10 p-10 md:p-16 shadow-2xl relative overflow-hidden">
                                <div className="flex gap-4 mb-8">
                                    <button className="flex-1 py-4 bg-cyan-600 text-white rounded-2xl font-black text-xs uppercase tracking-widest">وصف نصي</button>
                                    <button className="flex-1 py-4 bg-white/5 text-slate-500 rounded-2xl font-black text-xs uppercase tracking-widest border border-white/5">فحص بالصور</button>
                                </div>
                                <textarea 
                                    className="w-full bg-transparent border-none text-2xl text-white placeholder:text-slate-800 outline-none resize-none h-40 font-medium leading-relaxed"
                                    placeholder="اوصف اللي حاسس بيه في العربية.. مثال: 'صوت تزييق مع الفرامل'"
                                    value={symptom}
                                    onChange={(e) => setSymptom(e.target.value)}
                                />
                                <button onClick={handleAnalyze} className="w-full mt-10 bg-gradient-to-r from-cyan-500 to-blue-600 text-white py-6 rounded-[30px] font-black text-2xl shadow-xl hover:-translate-y-2 transition-all flex justify-center items-center gap-4">
                                    <span>ابدأ الفحص الذكي</span>
                                    <IconZap />
                                </button>
                            </div>
                        )}

                        {inputMode === 'maintenance' && !maintenancePlan && !loading && (
                            <div className="bg-[#0e121a] rounded-[50px] border border-white/10 p-12 md:p-16 shadow-2xl">
                                <h3 className="text-3xl font-black text-white mb-8">صمم خطة صيانتك</h3>
                                <div className="space-y-6">
                                    <input type="text" placeholder="موديل السيارة (مثل: تويوتا كورولا 2022)" className="w-full bg-white/5 border border-white/10 rounded-2xl p-5 text-xl outline-none" value={carModel} onChange={(e) => setCarModel(e.target.value)} />
                                    <input type="number" placeholder="الممشى الحالي (كم)" className="w-full bg-white/5 border border-white/10 rounded-2xl p-5 text-xl outline-none" value={mileage} onChange={(e) => setMileage(e.target.value)} />
                                    <button onClick={handleMaintenance} className="w-full bg-blue-600 text-white py-6 rounded-[30px] font-black text-2xl shadow-xl hover:-translate-y-2 transition-all">توليد الخطة</button>
                                    <button onClick={() => setInputMode('text')} className="w-full text-slate-600 font-bold">إلغاء</button>
                                </div>
                            </div>
                        )}

                        {loading && (
                            <div className="fixed inset-0 z-[100] bg-[#05070a]/95 flex items-center justify-center p-6">
                                <CherokeeLoading />
                            </div>
                        )}

                        {diagnosis && (
                            <div className="animate-in fade-in slide-in-from-bottom-10 duration-700">
                                <div className="bg-[#0e121a] rounded-[50px] border border-cyan-500/20 p-12 md:p-16 shadow-2xl relative overflow-hidden">
                                    <h2 className="text-4xl font-black text-white mb-8 border-r-4 border-cyan-500 pr-4">نتيجة التشخيص</h2>
                                    <div className="space-y-8">
                                        <div className="bg-white/5 p-8 rounded-3xl border border-white/5">
                                            <h3 className="text-cyan-400 text-2xl font-black mb-4">{diagnosis.title}</h3>
                                            <p className="text-slate-300 text-xl leading-relaxed">{diagnosis.analysis}</p>
                                        </div>
                                        <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                                            <div className="bg-white/5 p-8 rounded-3xl">
                                                <span className="text-slate-500 text-xs block mb-2 font-bold uppercase tracking-widest">التكلفة التقديرية (مصر)</span>
                                                <span className="text-3xl font-black text-white">{diagnosis.price}</span>
                                            </div>
                                            <div className="bg-red-500/10 p-8 rounded-3xl border border-red-500/20">
                                                <span className="text-red-500 text-xs block mb-2 font-bold uppercase tracking-widest">نصيحة CAR_Doc</span>
                                                <p className="text-red-100 text-lg font-bold italic leading-snug">"{diagnosis.tip}"</p>
                                            </div>
                                        </div>
                                    </div>
                                    <button onClick={() => setDiagnosis(null)} className="mt-12 text-slate-500 font-bold hover:text-white transition-all underline underline-offset-8">تشخيص جديد</button>
                                </div>
                            </div>
                        )}

                        {maintenancePlan && (
                            <div className="animate-in fade-in slide-in-from-bottom-10 duration-700">
                                <div className="bg-[#111827] rounded-[50px] border border-blue-500/20 p-12 md:p-16 shadow-2xl">
                                    <h2 className="text-4xl font-black text-white mb-8">{maintenancePlan.title}</h2>
                                    <div className="grid grid-cols-1 md:grid-cols-2 gap-8">
                                        <div className="bg-red-500/5 p-8 rounded-3xl border border-red-500/10">
                                            <h4 className="text-red-400 font-black mb-4 uppercase text-xs tracking-widest">صيانة عاجلة الآن</h4>
                                            <ul className="space-y-3 text-slate-300">
                                                {maintenancePlan.urgent.map((item, i) => <li key={i}>• {item}</li>)}
                                            </ul>
                                        </div>
                                        <div className="bg-cyan-500/5 p-8 rounded-3xl border border-cyan-500/10">
                                            <h4 className="text-cyan-400 font-black mb-4 uppercase text-xs tracking-widest">صيانة قادمة</h4>
                                            <ul className="space-y-3 text-slate-300">
                                                {maintenancePlan.upcoming.map((item, i) => <li key={i}>• {item}</li>)}
                                            </ul>
                                        </div>
                                    </div>
                                    <div className="mt-8 p-6 bg-white/5 rounded-2xl text-center">
                                        <span className="text-slate-500 block text-xs mb-1 italic tracking-widest font-bold">التكلفة التقديرية الإجمالية</span>
                                        <span className="text-3xl font-black text-white">{maintenancePlan.cost}</span>
                                    </div>
                                    <button onClick={() => setMaintenancePlan(null)} className="mt-12 text-slate-500 font-bold hover:text-white transition-all underline underline-offset-8">العودة للرئيسية</button>
                                </div>
                            </div>
                        )}
                    </main>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
